import SwiftUI

struct ServiceProviderView: View {
    @Environment(\.presentationMode) var presentationMode
    
    let text: String
    let menuItems = ["TRAUREDNER", "MUSIKER", "STYLISTEN", "HOCHZEITSTORTEN", "CATERING", "VIDEOGRAFEN", "GRAFIKER"]
    
    init(text: String) {
        self.text = text
    }
    
    var body: some View {
        NavigationView {
            ScrollView {
                Text("Ihr seid auf der Suche nach verschiedenen Dienstleistern die eure Hochzeit zu einem unvergesslichen Moment machen? Um es Euch so einfach wie m√∂glich zu machen, haben wie Euch verschiedene Dienstleister zusammengestellt, die wir herzlichst empfehlen w√ºrden. Schaut Euch um, stellt direkt eure Anfrage oder nehmt telefonisch Kontakt auf.").padding()
                    .frame(maxWidth: .infinity, alignment: .center)
                
                AllServiceProviderDetailView(title: menuItems[0], serviceProviders: [
                    ServieProviderDetailView(
                        imageName: "Annette-quadrat",
                        address: "Hochzeitsm√§rchen Bodensee - Annette Essert | Dornierstrasse 75 | 88048 Friedrichshafen | E-Mail: info@hochzeitsmaerchen-bodensee.de | Telefon: 0176 81629045",
                        title: "HOCHZEITSM√ÑRCHEN BODENSEE - ANNETTE",
                        description: "Ihr Lieben, ich bin hauptberuflich S√§ngerin und Traurednerin und liebe diesen Beruf nicht nur, sondern ich LEBE ihn. All' meine Paare, bekommen 200 % von mir, meiner Energie und meiner Leidenschaft (und meinen Humor). Meine Reden und mein Gesang kommen wirklich von Herzen und die sch√∂nsten Momente sind f√ºr mich: weinende M√§nner ü•πüòÅ. Ich LIEBE es, wenn der Br√§utigam oder die m√§nnlichen G√§ste weinen, wenn ich auch die harte Kerne knacken konnte. Ich liebe den Augenblick, wenn die Br√§ute mir w√§hrend dem Gesang mit Tr√§nen in den Augen zuh√∂ren und wir uns alle zusammen w√§hrend der Trauung immer wieder kaputtlachen. Die Dankbarkeit meiner Paare sind f√ºr mich abschlie√üend so unglaublich sch√∂n. Jede Lovestory ist so komplett unterschiedlich und individuell. Ich arbeite mit keinen Gedichten oder Standards. Ich nehme EURE Geschichte, Leidenschaften, Pers√∂nlichkeiten und Eure W√ºnsche und packe meine Erfahrung und meine Tipps noch dazu. Das Ergebnis ist immer: LIEBE! F√ºhlt Euch gedr√ºckt, Annette",
                        email: "info@hochzeitsmaerchen-bodensee.de",
                        telephone: "017681629045"
                    ),
                    ServieProviderDetailView(
                        imageName: "Tanja-Fimpel-quadrat",
                        address: "Freie Trauung Ravensburg - Tanja Fimpel | Birkenstra√üe 4 | 88214 Ravensburg | E-Mail: tanja.fimpel@gmx.de | Telefon: 0176 63427108 | Instagram: @freietrauungrv",
                        title: "FREIE TRAUUNG RAVENSBURG - TANJA",
                        description: "Ich biete euch eine humorvolle, emotionale und vor allem sehr individuelle freie Trauung. Wenn ihr m√∂chtet, singe ich auch gerne bei eurer Trauung. Zu mir: Mein Name ist Tanja Heidi Fimpel und ich liebe das Leben!  ÔªøEs gibt eigentlich kaum einen Tag, an dem ich nicht lache und singe. Ich bin ein von Grund auf positiv gestimmter Mensch und gebe auch gerne meine positiven Vibes an andere weiter. Durch das Singen bin ich zu diesem wunderbaren Beruf der Traurednerin gekommen. Seit 2016 bin ich freie Traurednerin mit Herz und Humor und liebe es, Menschen in ihrem Gl√ºck begleiten zu d√ºrfen. Besonders wichtig ist f√ºr mich, dass die Chemie zwischen uns stimmt. Mein Bestreben ist es immer, eine m√∂glichst individuelle Trauung inkl. Rede zu kreieren, die gut zu euch passt. Authentisch zu schreiben ist mein absoluter Fokus. Eure G√§ste sollen euch wiedererkennen in der Rede und mein Ziel ist es, dass alle G√§ste, samt euch, die ganze Rede √ºber gespannt zuh√∂ren. Es sollen Emotionen frei werden und ihr sollt eine f√ºr euch perfekte und vor allem unvergessliche Trauung erleben. Eure Tanja",
                        email: "tanja.fimpel@gmx.de",
                        telephone: "017663427108"
                    ),
                    ServieProviderDetailView(
                        imageName: "Evelin-Stadler-quadrat",
                        address: "Hochzeitsplanung & Freie Trauung | 88427 Bad Schussenried | www.trausache.de | E-Mail: info@trausache.de | Telefon: 0173 8095877",
                        title: "TRAUSACHE - EVELIN STADLER",
                        description: "Bei TRAUSACHE k√∂nnt Ihr sowohl eine Hochzeitsplanung als auch eine Traurede buchen, sehr gerne auch Beides zusammen. Ich liebe diesen Beruf aus Leidenschaft und begleite Euch als Weddingplanerin von Beginn der Planung bis hin zu Eurem einzigartigen Hochzeitstag, damit ihr Euch voller Vertrauen ganz entspannt zur√ºcklehnen k√∂nnt. F√ºr die Trauzeremonie erstellen wir gemeinsam einen Ablauf, in dem ich Eure W√ºnsche individuell umsetze. Dabei kreiere ich f√ºr Euch eine sehr pers√∂nliche Traurede die von Herzen kommt und Eure Lovestory wiederspiegelt, welche uns und Eure G√§ste zum Lachen und Weinen bringen wird. Diese emotionalen Momente werden dann von der lieben Jovanna von Kwickshot in wundervollen Bildern festgehalten, sodass ihr Euch immer an diesen unvergesslichen Tag zur√ºckerinnern k√∂nnt. Ich freue mich auf Euch. Eure Evelin Stadler von TRAUSACHE",
                        email: "info@trausache.de",
                        telephone: "01738095877"
                    )
                    
                ])
                
                AllServiceProviderDetailView(title: menuItems[1], serviceProviders: [
                    ServieProviderDetailView(
                        imageName: "Tom-Mayer-quadrat",
                        address: "Tom Mayer | Langenenslingen | E-Mail: tom@tomiano.de | Telefon 0176 2029 2173 | www.tom-pianist.de | Spotify: Hier klicken (Playlist mit Klavierliedern f√ºr freie Trauungen)",
                        title: "TOM MAYER - PIANIST",
                        description: "Liebes Brautpaar, Ich bin Tom, der Pianist, und w√ºrde richtig gerne Eure Trauung mit Piano-Musik untermalen. Stellt euch vor: An Eurer Hochzeit h√∂rt ihr all Eure Lieblingslieder ‚Äì sei es Pop, Rock, Metal, oder Malle-Songs ‚Äì als gef√ºhlvolle Klavierversionen. Zusammen mit der Traurednerin kreieren wir eine wundersch√∂ne Stimmung f√ºr Eure Zeremonie. Meine Piano-Musik ist wie der Soundtrack eines Films und verst√§rkt die Emotionen, die transportiert werden. Meist beginne ich bereits 20 Minuten vor der Trauung zu spielen - so werden die ankommenden G√§ste gleich in die richtige Stimmung gebracht. Auch w√§hrend der Trauung untermale ich die Worte der Traurednerin passend, sodass sie noch intensiver auf euch und eure G√§ste wirken. Gerne begleite ich euch auch danach f√ºr den Sektempfang oder w√§hrend des Abendessens und sorge f√ºr gute Stimmung. Ihr k√∂nnt mich entweder solo am Klavier buchen oder mit einer S√§ngerin zusammen. Falls ihr jemanden im Familien-/Freundeskreis habt, die gerne singen w√ºrde, begleite ich sie gerne am Piano. Ich freue mich darauf, euren Tag so mitzugestalten, dass er f√ºr euch perfekt ist. Euer Tom",
                        email: "tom@tomiano.de",
                        telephone: "017620292173"
                    ),
                    
                    ServieProviderDetailView(
                        imageName: "twoforyou-quadrat",
                        address: "TwoforYou GbR - Katharina Pfister & Alexandra Glaser | Oberseehof 1 | 72511 Bingen | E-Mail: twoforyou.music@web.de | Telefon: 0162 7645937",
                        title: "TWO FOR YOU - BAND",
                        description: "Du suchst eine musikalische Umrahmung f√ºr deine Feier. Dann bist Du bei Uns genau richtig ! Wir sind Alexandra & Katharina, die Gesichter hinter TwoforYou. Wir kommen aus Bingen bei Sigmaringen. Uns verbindet nicht nur die Leidenschaft zur Musik, sondern auch eine langj√§hrige Freundschaft. Wir freuen uns jedes mal aufs Neue ,vor Menschen zu stehen und sie mit unserer Musik ber√ºhren zu k√∂nnen. Unsere Vielf√§ltigkeit durch zweistimmigen Gesang und Live-Gitarrenbegleitung verleiht den Zuschauen etwas ganz Besonderes. Mach auch du dein Event zu etwas Besonderem. Wir singen f√ºr Dich - egal ob im Standesamt, bei einer freien Trauung, in der Kirche, auf dem Sektempfang, bei der Taufe, auf einer Trauerfeier oder sonstigen Events. Schicke uns einfach eine unverbindliche Anfrage und wir k√ºmmern uns dann um all Deine W√ºnsche. Gerne auch in einem pers√∂nlichen Gespr√§ch. Wir freuen uns auf Dich! - Katharina & Alexandra",
                        email: "twoforyou.music@web.de",
                        telephone: "01627645937"
                    ),
                    
                    ServieProviderDetailView(
                        imageName: "",
                        address: "Lisa Steigmayer | Alemannenweg 14, 72474 Winterlingen | E-Mail: lisa.steigmayer@gamil.com | Telefon 0152 33869264 | www.leeeza.de",
                        title: "LOVE TONES - BAND",
                        description: "Hallo ihr lieben Brautpaare da drau√üen. Mein Name ist LISA STEIGMAYER und wohne im sch√∂nen WINTERLINGEN in Baden-W√ºrttemberg. Ihr sucht noch eine S√ÑNGERIN f√ºr euren BESONDEREN Tag?  Gerne w√ºrde ich eure HOCHZEIT oder TAUFE musikalisch umrahmen. Egal ob SOLO oder mit meinem GITARRISTEN - IHR entscheidet. Dank meiner GESANGSAUSBILDUNG bei Frau ABERNATHY bringe ich nicht nur die EMOTIONEN, sondern auch die richtige GESANGSTECHNIK mit. Freut euch auf GEF√úHLE. SPASS und LEICHTIGKEIT! Bis hoffentlich bald! Eure L I S A ",
                        email: "lisa.steigmayer@gamil.com",
                        telephone: "015233869264 "
                    )
                ])
                
                AllServiceProviderDetailView(title: menuItems[2], serviceProviders: [
                    ServieProviderDetailView(
                        imageName:"2022-12-10-Friseursalon-Rauch-kwickshot-14-quadrat",
                        address: "Der Haarslon - Friseurmeisterin Susanne Rauch-Ludwig | Hauptstra√üe 87 | 88348 Bad Saulgau | E-Mail: info@derhaarsalon.de | Telefon: 07581 6360",
                        title: "FRISEURSALON SUSANNE RAUCH - FRISEURIN",
                        description: "Unser wichtigster Grundsatz als Biosthetik-Friseur ist: Ihre Haare sind wertvoll. Sie demonstrieren Mode-Feeling und vermitteln Sch√∂nheit. Als Biosthetik-Spezialist nehmen wir uns Zeit f√ºr Sie, denn eine optimale Frisurenberatung ist Grundlage f√ºr Ihre und letztlich auch unsere Zufriedenheit. In unserem Team arbeiten daher dynamische, kompetente Mitarbeiter mit viel Freude am Umgang mit Menschen und Haar.",
                        email: "info@derhaarsalon.de",
                        telephone: "075816360"
                    ),
                    ServieProviderDetailView(
                        imageName: "Nadine-Ostermeier-quadrat",
                        address: "Nadine Ostermeier | Bachstra√üe 11 | 88348 Bad Saulgau | E-Mail: info@nadine-ostermeier.de | Telefon: 0176 63127487",
                        title: "NADINE OSTERMEIER - VISAGISTIN",
                        description: "Hallo, ich bin Nadine Ostermeier, wohne in Bad Saulgau und bin seit mehr als einem Jahrzehnt als Visagistin t√§tig. Es macht mir viel Freude, die √ºber die Jahre erlernten und von mir entwickelten Schminktechniken in meinem Studio anzuwenden und wenn ich diese an Sie weitergeben darf. Damit ich mir f√ºr Sie Zeit nehmen kann, bitte ich um telefonische Terminvereinbarungen.",
                        email: "info@nadine-ostermeier.de",
                        telephone: "017663127487"
                    )
                ])
                
                AllServiceProviderDetailView(title: menuItems[3], serviceProviders: [
                    ServieProviderDetailView(
                        imageName: "Tonkab√∂hnle-Tamara",
                        address: "Tamara Bartnik | Badhausstra√üe 9 | 88422 Bad Buchau | Telefon: 07582 7959930",
                        title: "Madame TonkaB√∂hnle",
                        description: "Neben der klassischen Hochzeitstorte kredenzt Madame TonkaB√∂hnle individuell angefertigte Gastgeschenke in Form von Keksen, Macarons oder Geb√§ck. F√ºr Euren Sweet Table k√∂nnt Ihr auch T√∂rtchen, Desserts im Glas, Cupcakes und andere kleine K√∂stlichkeiten anfertigen lassen. Nat√ºrlich auch deftiges Kleingeb√§ck aus handgemachtem Bl√§tterteig f√ºr Euren Sektempfang. Der Verleih von Etageren, Tortenplatten und Tortenst√§nder ist sehr gerne kostenlos m√∂glich. Ich freue mich Eure Hochzeit mit Euch zu planen! Madame TonkaB√∂hnle freut sich √ºber Eure Anfrage √ºber das Kontaktformular.",
                        email: "info@tonkaboehnle.de",
                        telephone: "075827959930"
                    )
                ])
                
                AllServiceProviderDetailView(title: menuItems[4], serviceProviders: [
                    ServieProviderDetailView(
                        imageName: "",
                        address: "Stadiongastst√§tte Sportheim | Sportplatzstra√üe 18 | 88367 Hohentengen | Telefon: 07572 5768",
                        title: "SPORTHEIM HOHENTENGEN - CATERING",
                        description: "Schw√§bische Spezialit√§ten aus guter K√ºche. Wir liefern dein individuelles Hochzeitsgericht f√ºr euren besonderen Anlass.",
                        email: "",
                        telephone: "075725768"
                    )
                ])
                
                AllServiceProviderDetailView(title: menuItems[5], serviceProviders: [
                    ServieProviderDetailView(
                        imageName: "2023-Niklas-Emotional-Wedding",
                        address: "Niklas Stadler | Am Kreuzberg 33 | 89441 Medlingen | E-Mail: info@emotional-wedding-movies.de | Telefon: 0160 99844214",
                        title: "EMOTIONAL WEDDING MOVIES - NIKLAS",
                        description: "Hey, Ich bin Niklas und ich bin Hochzeitsvideograf. Zusammen mit den Bildern ist es mein Ziel euren gro√üen Tag f√ºr immer festzuhalten. Ich m√∂chte euren Tag in einem einzigartigen und emotionalen Hochzeitsvideo f√ºr immer konservieren, mit all den Emotionen und Momenten, die leider viel zu schnell verfliegen.",
                        email: "info@emotional-wedding-movies.de",
                        telephone: "016099844214"
                    )
                ])
                
                AllServiceProviderDetailView(title: menuItems[6], serviceProviders: [
                    ServieProviderDetailView(
                        imageName: "Carolin-Vogelmann-quadrat",
                        address: "Carolin Vogelmann | 88348 Bad Saulgau | E-Mail: info@carolinvogelmann.de | Instagram: @carolinvogelmann.wedding",
                        title: "HOCHZEITSPAPETERIE - CAROLIN VOGELMANN",
                        description: "Bei mir findet ihr moderne & elegante Hochzeitspapeterie. W√§hlt zwischen einer fertigen Designkollektion oder einem individuell f√ºr euch erstellten Design. Gerne unterst√ºtze und begleite ich euch von der Erstberatung bis hin zur finalen Papeterie. √úber mich: Die Kombination aus Eleganz und Minimalismus beschreibt nicht nur meine Papeterie, sondern zieht sich durch mein ganzes Leben. F√ºr manche m√∂gen die beiden Aspekte gegens√§tzlich klingen, f√ºr mich schaffen sie die perfekte Harmonie. Zur√ºckhaltend aber gleichzeitig auffallend, bodenst√§ndig aber gleichzeitig extravagant. Ich unterst√ºtze und berate euch dabei ein Papeterie Design zu finden, das perfekt auf das Gesamtkonzept eurer Hochzeit abgestimmt ist. Meist sind es die kleinen Dinge, die das Gro√üe perfekt machen. F√ºr mich gibt es keine besseren Werkzeuge als die Kombination aus digital und Handwerk. Mit viel Hingabe und Liebe zum Detail begleite ich euch von der Beratung √ºber die Erstellung von Erstentw√ºrfen bis hin zur finalen Papeterie.",
                        email: "info@carolinvogelmann.de",
                        telephone: ""
                    ),
                    ServieProviderDetailView(
                        imageName: "Laura-quadrat",
                        address: "Laura Sch√§fauer | Leopoldstra√üe 28 | 72488 Sigmaringen | E-Mail: info@lsmediendesign.de | Telefon: 0151 72745320",
                        title: "LS MEDIENDESIGN - GRAFIKERIN",
                        description: "Ich biete individuelle Gestaltung f√ºr Ihre Print- und Online-Projekte von A-Z. F√ºr Privatpersonen biete ich personalisierte Produkte, wie z. B. Einladungskarten f√ºr Ihre Feier, Hochzeit oder Ihren Geburtstag an.",
                        email: "info@lsmediendesign.de",
                        telephone: "015172745320"
                    ),
                    ServieProviderDetailView(
                        imageName: "Alica-quadrat",
                        address: "Alica Freitag | Alter Dorfweg 13 | 88348 Bad Saulgau | E-Mail: kartenmalerei@web.de | Instagram: @alicas_kartenmalerei | Telefon: 0162 4396968",
                        title: "ALICA'S KARTENMALEREI",
                        description: "Ihr sucht nach einer besonderen und individuellen Papeterie f√ºr euren gro√üen Tag? Bei mir erhaltet ihr liebevoll gestaltete Hochzeitseinladungen fernab der Massenware: Von der ‚ÄúSave the date‚Äù-Karte, √ºber die Einladungskarte, bis hin zu weiterer Papeterie wie Men√ºkarten, Sitzplan, Namensk√§rtchen, Dankeskarten & Co. ‚Äì die M√∂glichkeiten an Papeterie f√ºr eure Hochzeit sind fast unendlich. Gemeinsam lassen wir aus euren Ideen & W√ºnschen euren Traum auf Papier wahr werden. Habt ihr spezielle W√ºnsche? Dann bin ich eure Ansprechpartnerin daf√ºr",
                        email: "kartenmalerei@web.de",
                        telephone: "01624396968"
                    )
                ])
            }
            .swipeToDismiss()
            .padding(.top, 35)
            .overlay {
                Toolbar(text: text, backAction: { self.goBack() })
            }
            
        }
        .navigationBarBackButtonHidden(true) // Hide the default back button.
        .navigationBarHidden(true)
    }
    
    func goBack() {
        presentationMode.wrappedValue.dismiss()
    }
}


struct ServiceProviderView_Previews: PreviewProvider {
    static var previews: some View {
        ServiceProviderView(text: "Dienstleister")
    }
}
struct AllServiceProviderDetailView: View {
    @State private var show: Bool = false
    let title: String
    var serviceProviders = [ServieProviderDetailView]()

    init(title: String, serviceProviders: [ServieProviderDetailView]) {
        self.title = title
        self.serviceProviders = serviceProviders
    }

    var body: some View {
        VStack {
            SectionHeaderView(title: title, isExpanded: $show)

            if show {
                ScrollView(.vertical) {
                    VStack(spacing: 20) {
                        ForEach(serviceProviders, id: \.self) { serviceProvider in
                            serviceProvider
                        }
                    }
                }
            }
        }
        .padding(.horizontal)
        .padding(.vertical, 5)
    }
}

struct ServieProviderDetailView: View , Hashable{
    let imageName: String
    let address: String
    let title: String
    let description: String
    let email: String
    let telephone: String
    
    @State private var alertMessage = ""
    @State private var alertTitle = ""
    @State private var showAlert = false
    
    init(imageName: String, address: String, title: String, description: String, email : String, telephone : String) {
        self.imageName = imageName
        self.address = address
        self.title = title
        self.description = description
        self.email = email
        self.telephone = telephone
    }
    
    var body: some View {
        VStack(alignment: .leading, spacing: 20) {
            if !imageName.isEmpty {
                Image(imageName)
                    .resizable()
                    .scaledToFit()
                    .cornerRadius(10)
                    .padding(.leading, 10)
                    .padding(.trailing, 10)
                    .padding(.top, 10)
            }
            
            Text(address)
                .font(.custom("Lustria-Regular", size: 16))
                .foregroundColor(.gray)
                .frame(maxWidth: .infinity, alignment: .center)
                .padding(.leading, 10)
                .padding(.trailing, 10)
                .padding(.top, 10)
            
            Text(title)
                .fontWeight(.bold)
                .font(.custom("Lustria-Regular", size: 30))
                .frame(maxWidth: .infinity, alignment: .center)
                .padding(.leading, 10)
                .padding(.trailing, 10)
                .lineLimit(/*@START_MENU_TOKEN@*/2/*@END_MENU_TOKEN@*/)
                .minimumScaleFactor(0.4)
                .multilineTextAlignment(.center)
            
            Text(description)
                .frame(maxWidth: .infinity, alignment: .center)
                .padding(.leading, 10)
                .padding(.trailing, 10)
            
            HStack(spacing: 16) {
                if !telephone.isEmpty {
                    Button(action: {
                        if let url = URL(string: "tel://" + telephone) {
                            UIApplication.shared.open(url)
                        }
                    }) {
                        Text("ANRUFEN")
                            .foregroundColor(.white)
                            .padding()
                            .background(Color(hex: 0x425C54))
                            .cornerRadius(10)
                    }  .frame(maxWidth: .infinity)
                }
                
                if !email.isEmpty {
                    Button(action: {
                        if let emailURL = createEmailURL(recipient: email, subject: "Buchungsanfrage", body: "") {
                            if UIApplication.shared.canOpenURL(emailURL) {
                                UIApplication.shared.open(emailURL, options: [:])
                            } else {
                                showAlert(title: "Fehler", message: "E-Mail konnte nicht ge√∂ffnet werden. √úberpr√ºfen Sie Ihre E-Mail-Konfiguration.")
                            }
                        } else {
                            showAlert(title: "Fehler", message: "E-Mail konnte nicht ge√∂ffnet werden. √úberpr√ºfen Sie Ihre E-Mail-Konfiguration.")
                        }
                    }) {
                        Text("E-MAIL")
                            .foregroundColor(.white)
                            .padding()
                            .background(Color(hex: 0x425C54))
                            .cornerRadius(10)
                            .font(.custom("Lustria-Regular", size: 18))
                    }.frame(maxWidth: .infinity)
                }
            }
            .padding(10)
        }
        .alert(isPresented: $showAlert) {
            Alert(title: Text(alertTitle), message: Text(alertMessage), dismissButton: .default(Text("OK")))
        }
        .background(Color(hex: 0xF5F5F5))
        .cornerRadius(10)
        .shadow(radius: 5)
        .padding(5)
    }
    
    static func == (lhs: ServieProviderDetailView, rhs: ServieProviderDetailView) -> Bool {
        return lhs.imageName == rhs.imageName
        && lhs.address == rhs.address
        && lhs.title == rhs.title
        && lhs.description == rhs.description
    }
    
    func hash(into hasher: inout Hasher) {
        hasher.combine(imageName)
        hasher.combine(address)
        hasher.combine(title)
        hasher.combine(description)
    }   
    
    private func showAlert(title: String, message: String) {
        alertTitle = title
        alertMessage = message
        
        DispatchQueue.main.async {
            showAlert = true
        }
    }
}
